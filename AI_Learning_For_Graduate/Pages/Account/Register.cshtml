@page 
@{
    ViewData["Title"] = "Đăng ký";
}

<div class="container">
    <h2>Đăng ký tài khoản</h2>
    <form id="registerForm">
        <div class="form-group">
            <label>Email</label>
            <input type="email" id="email" required />
            <div class="error" id="emailError"></div>
        </div>
        <div class="form-group">
            <label>Mật khẩu</label>
            <input type="password" id="password" required />
            <div class="error" id="passwordError"></div>
        </div>
        <div class="form-group">
            <label>Xác nhận mật khẩu</label>
            <input type="password" id="confirmPassword" required />
            <div class="error" id="confirmError"></div>
        </div>
        <button type="submit">Đăng ký</button>
    </form>
    <div id="successMessage" style="color: green;"></div>
</div>
@section Scripts {
	<script>
		document.getElementById('registerForm').addEventListener('submit', function (event) {
			event.preventDefault();

			const email = document.getElementById('email').value.trim();
			const password = document.getElementById('password').value;
			const confirmPassword = document.getElementById('confirmPassword').value;

			document.getElementById('emailError').textContent = '';
			document.getElementById('passwordError').textContent = '';
			document.getElementById('confirmError').textContent = '';
			document.getElementById('successMessage').textContent = '';

			let isValid = true;

			if (!email.includes('@@')) {
				document.getElementById('emailError').textContent = 'Email không hợp lệ.';
				isValid = false;
			}

			if (password.length < 6) {
				document.getElementById('passwordError').textContent = 'Mật khẩu phải có ít nhất 6 ký tự.';
				isValid = false;
			}

			if (password !== confirmPassword) {
				document.getElementById('confirmError').textContent = 'Mật khẩu và xác nhận mật khẩu không khớp.';
				isValid = false;
			}

			if (isValid) {
				const user = { email, password };
				//luu vao storage cua web browser
				localStorage.setItem('registeredUser', JSON.stringify(user));
				document.getElementById('successMessage').textContent = 'Đăng ký thành công!';
				document.getElementById('registerForm').reset();

				window.location.href = '/Account/Login';
			}
		});
	</script>
}
